project(vital_python_algo)

include_directories(${pybind11_INCLUDE_DIR})

kwiver_add_python_library(algorithm
  vital/algo
  algorithm.h
  analyze_tracks.h
  associate_detections_to_tracks.h
  bundle_adjust.h
  close_loops.h
  compute_association_matrix.h
  compute_depth.h
  compute_ref_homography.h
  compute_stereo_depth_map.h
  compute_track_descriptors.h
  convert_image.h
  detected_object_filter.h
  detected_object_set_input.h
  detected_object_set_output.h
  detect_features.h
  detect_motion.h
  draw_detected_object_set.h
  draw_tracks.h
  estimate_canonical_transform.h
  estimate_essential_matrix.h
  estimate_fundamental_matrix.h
  estimate_homography.h
  estimate_pnp.h
  estimate_similarity_transform.h
  extract_descriptors.h
  feature_descriptor_io.h
  filter_features.h
  filter_tracks.h
  image_io.h
  image_object_detector.h
  initialize_cameras_landmarks.h
  initialize_object_tracks.h
  integrate_depth_maps.h
  interpolate_track.h
  keyframe_selection.h
  algorithm.cxx
  analyze_tracks.cxx
  associate_detections_to_tracks.cxx
  bundle_adjust.cxx
  close_loops.cxx
  compute_association_matrix.cxx
  compute_depth.cxx
  compute_ref_homography.cxx
  compute_stereo_depth_map.cxx
  compute_track_descriptors.cxx
  convert_image.cxx
  detected_object_filter.cxx
  detected_object_set_input.cxx
  detected_object_set_output.cxx
  detect_features.cxx
  detect_motion.cxx
  draw_detected_object_set.cxx
  draw_tracks.cxx
  estimate_canonical_transform.cxx
  estimate_essential_matrix.cxx
  estimate_fundamental_matrix.cxx
  estimate_homography.cxx
  estimate_pnp.cxx
  estimate_similarity_transform.cxx
  extract_descriptors.cxx
  feature_descriptor_io.cxx
  filter_features.cxx
  filter_tracks.cxx
  image_io.cxx
  image_object_detector.cxx
  initialize_cameras_landmarks.cxx
  initialize_object_tracks.cxx
  integrate_depth_maps.cxx
  interpolate_track.cxx
  keyframe_selection.cxx
  algorithm_module.cxx
  trampoline/algorithm_trampoline.txx
  trampoline/analyze_tracks_trampoline.txx
  trampoline/close_loops_trampoline.txx
  trampoline/bundle_adjust_trampoline.txx
  trampoline/compute_association_matrix_trampoline.txx
  trampoline/compute_depth_trampoline.txx
  trampoline/compute_ref_homography_trampoline.txx
  trampoline/compute_stereo_depth_map_trampoline.txx
  trampoline/compute_track_descriptors_trampoline.txx
  trampoline/convert_image_trampoline.txx
  trampoline/detected_object_filter_trampoline.txx
  trampoline/detected_object_set_input_trampoline.txx
  trampoline/detected_object_set_output_trampoline.txx
  trampoline/detect_features_trampoline.txx
  trampoline/detect_motion_trampoline.txx
  trampoline/draw_detected_object_set_trampoline.txx
  trampoline/draw_tracks_trampoline.txx
  trampoline/estimate_canonical_transform_trampoline.txx
  trampoline/estimate_essential_matrix_trampoline.txx
  trampoline/estimate_fundamental_matrix_trampoline.txx
  trampoline/estimate_homography_trampoline.txx
  trampoline/estimate_pnp_trampoline.txx
  trampoline/estimate_similarity_transform_trampoline.txx
  trampoline/extract_descriptors_trampoline.txx
  trampoline/feature_descriptor_io_trampoline.txx
  trampoline/filter_features_trampoline.txx
  trampoline/filter_tracks_trampoline.txx
  trampoline/image_io_trampoline.txx
  trampoline/image_object_detector_trampoline.txx
  trampoline/initialize_cameras_landmarks_trampoline.txx
  trampoline/initialize_object_tracks_trampoline.txx
  trampoline/integrate_depth_maps_trampoline.txx
  trampoline/interpolate_track_trampoline.txx
  trampoline/keyframe_selection_trampoline.txx
)


target_link_libraries(python-vital.algo-algorithm
  PUBLIC ${PYTHON_LIBRARIES}
          vital
          vital_config
          vital_algo
          vital_python_util
)

kwiver_add_python_library(algorithm_factory
  vital/algo
  algorithm_factory.cxx
)

target_link_libraries(python-vital.algo-algorithm_factory
  PUBLIC ${PYTHON_LIBRARIES}
          vital
          vital_algo
)

kwiver_add_python_module(${CMAKE_CURRENT_SOURCE_DIR}/__init__.py
                                vital/algo
                                __init__)
