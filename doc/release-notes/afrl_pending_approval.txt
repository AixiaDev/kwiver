KWIVER Release Notes for changes pending release approval by AFRL
=================================================================

This file documents release notes for changes made to KWIVER which require
public release approval from AFRL.  After approval, the changes and
corresponding notes below will be incorporated into a public numbered
release version, and the content of this file will be reset.


Updates since last public release
---------------------------------

Vital

Arrows - Core

 * Added a detect_features adaptor that applies a filter_features
   algorithm to filter features returned by the detector.  This allows
   a filter to be injected anywhere a detector is normally used.

 * Added an adaptive non-max suppression filter for features points.
   This algorithm provides more uniformity to detected features by
   removing all features within a radius of the strongest points.
   The radius is dynamically adapted to achieve a target point count.

 * Added an option to the fundamental matrix matcher that does a second
   round of filtering to remove outliers with large motion relative to
   most other matches.

 * When resectioning cameras in the keyframe initializer we now copy the
   intrinsics from the nearest existing camera rather than from the base
   camera in the config or metadata.  This way the focal length better matches
   existing cameras and the initial pose will better match as well.

 * Updated the initialize_cameras_landmarks_keyframe algorithm to better
   handle early termination through callbacks.

 * Refactored initialize_cameras_landmarks_keyframe code for better
   reuseability and readability.

 * Added a new SfM utility function to compute a set of well-distributed
   but well-connected keyframes for use in initializing SfM.

 * During keyframe camera initialization the algorithm detects if the camera
   graph has split into multiple components.  Previously only the largest
   component was kept resulting in significant data loss.  Instead the
   algorithm now tries to retriangulate tracks that previously held the
   camera graph together.

Arrows - Ceres

 * Fixed long-broken bundle adjustment regularization parameters for
   camera smoothness and forward motion damping.  The fixed versions now
   support non-sequential camera frame numbers and the residual costs are
   normalized relative to both the number of existing residuals and the
   spatial scale of the camera positions.  These normalization allow the
   regularization to work similarly across different problem sizes and scales.

 * Added a configuration option to the bundle adjuster that allow for
   callbacks to not provided updates on every iteration for efficiency.


Fixes since last public release
-------------------------------

Arrows - Core

 * Fixed a bug in initialize_cameras_landmarks_keyframe that was causing
   points to be rejected because cameras were swapped.

Arrows - Ceres

 * Fixed an issue in bundle adjustment where intrinsics were optimized
   when shared between fixed and non-fixed cameras.  This resulted in an
   increased error in residual terms of fixed cameras not included in the
   bundle adjustment.  As a result, filtering often removed these points as
   outliers.  It is better to only optimize intrinsics when not shared with
   a fixed camera.

 * Fixed and issue with bundle adjustment regularization in which the
   regularization would dominate the data terms if the scale of the data
   was large.
